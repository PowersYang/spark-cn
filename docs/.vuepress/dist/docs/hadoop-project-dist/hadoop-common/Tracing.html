<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Enabling Dapper-like Tracing in Hadoop | Hadoop中文网</title>
    <meta name="description" content="Hadoop中文网、Hadoop中文社区。">
    
    
    <link rel="preload" href="/assets/css/0.styles.74fd5345.css" as="style"><link rel="preload" href="/assets/js/app.7e1369fc.js" as="script"><link rel="preload" href="/assets/js/2.8cd1edd2.js" as="script"><link rel="preload" href="/assets/js/53.0b9d0754.js" as="script"><link rel="prefetch" href="/assets/js/10.b3d78adc.js"><link rel="prefetch" href="/assets/js/100.338ef29e.js"><link rel="prefetch" href="/assets/js/101.9a2d5594.js"><link rel="prefetch" href="/assets/js/102.f30d4594.js"><link rel="prefetch" href="/assets/js/103.310e80b9.js"><link rel="prefetch" href="/assets/js/104.bfe62a98.js"><link rel="prefetch" href="/assets/js/105.d52482b5.js"><link rel="prefetch" href="/assets/js/106.10d62bf2.js"><link rel="prefetch" href="/assets/js/107.0d36c432.js"><link rel="prefetch" href="/assets/js/108.76eebe7f.js"><link rel="prefetch" href="/assets/js/109.9976a9d6.js"><link rel="prefetch" href="/assets/js/11.fd3a73c3.js"><link rel="prefetch" href="/assets/js/110.2e14b3a5.js"><link rel="prefetch" href="/assets/js/111.9daa5766.js"><link rel="prefetch" href="/assets/js/112.af3e996e.js"><link rel="prefetch" href="/assets/js/113.a3739183.js"><link rel="prefetch" href="/assets/js/114.cacb1a8d.js"><link rel="prefetch" href="/assets/js/115.89beeb22.js"><link rel="prefetch" href="/assets/js/116.75d8c4f4.js"><link rel="prefetch" href="/assets/js/117.35acc2cb.js"><link rel="prefetch" href="/assets/js/118.c47eb46f.js"><link rel="prefetch" href="/assets/js/119.06e60eff.js"><link rel="prefetch" href="/assets/js/12.b267e7c5.js"><link rel="prefetch" href="/assets/js/120.5a844a99.js"><link rel="prefetch" href="/assets/js/121.4e42c7b2.js"><link rel="prefetch" href="/assets/js/122.0f937ea6.js"><link rel="prefetch" href="/assets/js/123.b9f24e75.js"><link rel="prefetch" href="/assets/js/124.d4909458.js"><link rel="prefetch" href="/assets/js/125.cfa0f600.js"><link rel="prefetch" href="/assets/js/126.3c7193be.js"><link rel="prefetch" href="/assets/js/127.df7ca844.js"><link rel="prefetch" href="/assets/js/128.19f385cc.js"><link rel="prefetch" href="/assets/js/129.23fe607a.js"><link rel="prefetch" href="/assets/js/13.ac721d09.js"><link rel="prefetch" href="/assets/js/130.0e31fd94.js"><link rel="prefetch" href="/assets/js/131.7002bd4f.js"><link rel="prefetch" href="/assets/js/132.60450a5d.js"><link rel="prefetch" href="/assets/js/133.cf0ddc9a.js"><link rel="prefetch" href="/assets/js/134.e041e48d.js"><link rel="prefetch" href="/assets/js/135.743c373f.js"><link rel="prefetch" href="/assets/js/136.66c0c11a.js"><link rel="prefetch" href="/assets/js/137.f5c37435.js"><link rel="prefetch" href="/assets/js/138.7acf709d.js"><link rel="prefetch" href="/assets/js/139.9e6f030e.js"><link rel="prefetch" href="/assets/js/14.382d94eb.js"><link rel="prefetch" href="/assets/js/140.b41aec8e.js"><link rel="prefetch" href="/assets/js/141.76fc0588.js"><link rel="prefetch" href="/assets/js/142.c58f5801.js"><link rel="prefetch" href="/assets/js/143.e2648bcf.js"><link rel="prefetch" href="/assets/js/144.0f834ffb.js"><link rel="prefetch" href="/assets/js/145.672b01c2.js"><link rel="prefetch" href="/assets/js/146.799b9919.js"><link rel="prefetch" href="/assets/js/147.b879484b.js"><link rel="prefetch" href="/assets/js/148.74d28388.js"><link rel="prefetch" href="/assets/js/149.33d4527b.js"><link rel="prefetch" href="/assets/js/15.4d583ed1.js"><link rel="prefetch" href="/assets/js/150.7e05f0d7.js"><link rel="prefetch" href="/assets/js/151.1238d8f1.js"><link rel="prefetch" href="/assets/js/152.160e069d.js"><link rel="prefetch" href="/assets/js/153.d5d470f9.js"><link rel="prefetch" href="/assets/js/154.ce3b5aae.js"><link rel="prefetch" href="/assets/js/155.273d323d.js"><link rel="prefetch" href="/assets/js/156.5a245420.js"><link rel="prefetch" href="/assets/js/157.e5eedece.js"><link rel="prefetch" href="/assets/js/158.388b56bd.js"><link rel="prefetch" href="/assets/js/159.6fbfa47d.js"><link rel="prefetch" href="/assets/js/16.10fc3d44.js"><link rel="prefetch" href="/assets/js/160.ed744394.js"><link rel="prefetch" href="/assets/js/161.8d8f7fcc.js"><link rel="prefetch" href="/assets/js/162.be7dc7b3.js"><link rel="prefetch" href="/assets/js/163.d28dcd21.js"><link rel="prefetch" href="/assets/js/164.7de7b6a8.js"><link rel="prefetch" href="/assets/js/165.1ba84943.js"><link rel="prefetch" href="/assets/js/166.fd3616e2.js"><link rel="prefetch" href="/assets/js/167.c3ba83e3.js"><link rel="prefetch" href="/assets/js/168.7cadbe78.js"><link rel="prefetch" href="/assets/js/169.8a2dd541.js"><link rel="prefetch" href="/assets/js/17.e648f85b.js"><link rel="prefetch" href="/assets/js/170.a3326248.js"><link rel="prefetch" href="/assets/js/171.b8ff9df1.js"><link rel="prefetch" href="/assets/js/172.ebb50832.js"><link rel="prefetch" href="/assets/js/173.3da4053a.js"><link rel="prefetch" href="/assets/js/174.2e81d26b.js"><link rel="prefetch" href="/assets/js/175.bad33c4d.js"><link rel="prefetch" href="/assets/js/176.6a130a07.js"><link rel="prefetch" href="/assets/js/177.00b3a2f6.js"><link rel="prefetch" href="/assets/js/178.c9404060.js"><link rel="prefetch" href="/assets/js/179.3e0f771f.js"><link rel="prefetch" href="/assets/js/18.c3053f76.js"><link rel="prefetch" href="/assets/js/180.c3e532ba.js"><link rel="prefetch" href="/assets/js/181.c4aa068e.js"><link rel="prefetch" href="/assets/js/182.66da504e.js"><link rel="prefetch" href="/assets/js/183.c986d7e6.js"><link rel="prefetch" href="/assets/js/184.f7ffc8e2.js"><link rel="prefetch" href="/assets/js/185.02e8a7a4.js"><link rel="prefetch" href="/assets/js/186.962596d0.js"><link rel="prefetch" href="/assets/js/187.01236734.js"><link rel="prefetch" href="/assets/js/188.87405c3a.js"><link rel="prefetch" href="/assets/js/189.d603e54a.js"><link rel="prefetch" href="/assets/js/19.f4287b8a.js"><link rel="prefetch" href="/assets/js/190.1a8d1399.js"><link rel="prefetch" href="/assets/js/191.08184117.js"><link rel="prefetch" href="/assets/js/192.236487ea.js"><link rel="prefetch" href="/assets/js/193.8c1b69c8.js"><link rel="prefetch" href="/assets/js/194.91247e3e.js"><link rel="prefetch" href="/assets/js/195.fae1690c.js"><link rel="prefetch" href="/assets/js/196.f7fd0e76.js"><link rel="prefetch" href="/assets/js/197.05eae647.js"><link rel="prefetch" href="/assets/js/198.57302951.js"><link rel="prefetch" href="/assets/js/199.e5bc46b0.js"><link rel="prefetch" href="/assets/js/20.401aefb8.js"><link rel="prefetch" href="/assets/js/200.674bf2a2.js"><link rel="prefetch" href="/assets/js/201.664701eb.js"><link rel="prefetch" href="/assets/js/202.3d26fcf1.js"><link rel="prefetch" href="/assets/js/203.7b03d6d2.js"><link rel="prefetch" href="/assets/js/204.b0fc056e.js"><link rel="prefetch" href="/assets/js/205.d450f21a.js"><link rel="prefetch" href="/assets/js/206.674dca19.js"><link rel="prefetch" href="/assets/js/207.510f8a8b.js"><link rel="prefetch" href="/assets/js/208.30f1089e.js"><link rel="prefetch" href="/assets/js/209.43f667eb.js"><link rel="prefetch" href="/assets/js/21.7cb26ae1.js"><link rel="prefetch" href="/assets/js/210.888e6b3c.js"><link rel="prefetch" href="/assets/js/211.bf7d1dc5.js"><link rel="prefetch" href="/assets/js/212.73a875ef.js"><link rel="prefetch" href="/assets/js/213.89c17cdd.js"><link rel="prefetch" href="/assets/js/214.f1460e6d.js"><link rel="prefetch" href="/assets/js/215.aafe9cab.js"><link rel="prefetch" href="/assets/js/216.dd64007a.js"><link rel="prefetch" href="/assets/js/217.ca67a8b3.js"><link rel="prefetch" href="/assets/js/218.06e26786.js"><link rel="prefetch" href="/assets/js/219.4bcf8d03.js"><link rel="prefetch" href="/assets/js/22.9759e792.js"><link rel="prefetch" href="/assets/js/220.04003fee.js"><link rel="prefetch" href="/assets/js/221.53ebd203.js"><link rel="prefetch" href="/assets/js/222.0cf94484.js"><link rel="prefetch" href="/assets/js/223.38601d46.js"><link rel="prefetch" href="/assets/js/224.694e116d.js"><link rel="prefetch" href="/assets/js/225.d1030623.js"><link rel="prefetch" href="/assets/js/226.aa5f3eb6.js"><link rel="prefetch" href="/assets/js/227.715e6c67.js"><link rel="prefetch" href="/assets/js/228.4162490d.js"><link rel="prefetch" href="/assets/js/229.0d489617.js"><link rel="prefetch" href="/assets/js/23.5eb8dcf3.js"><link rel="prefetch" href="/assets/js/230.071bba65.js"><link rel="prefetch" href="/assets/js/231.468edccb.js"><link rel="prefetch" href="/assets/js/232.9467823e.js"><link rel="prefetch" href="/assets/js/233.ea5c46d3.js"><link rel="prefetch" href="/assets/js/234.7e4c9522.js"><link rel="prefetch" href="/assets/js/235.01086b0c.js"><link rel="prefetch" href="/assets/js/236.dfd2b901.js"><link rel="prefetch" href="/assets/js/237.add3959d.js"><link rel="prefetch" href="/assets/js/238.9b0bb3f7.js"><link rel="prefetch" href="/assets/js/239.f7678961.js"><link rel="prefetch" href="/assets/js/24.5c97f1b5.js"><link rel="prefetch" href="/assets/js/240.45e33e7a.js"><link rel="prefetch" href="/assets/js/241.a5c6105b.js"><link rel="prefetch" href="/assets/js/242.69e396f0.js"><link rel="prefetch" href="/assets/js/243.4ddcdd36.js"><link rel="prefetch" href="/assets/js/244.ea6c9f71.js"><link rel="prefetch" href="/assets/js/245.05e110cd.js"><link rel="prefetch" href="/assets/js/246.b4241e1e.js"><link rel="prefetch" href="/assets/js/247.b60736b7.js"><link rel="prefetch" href="/assets/js/248.26ca1ab6.js"><link rel="prefetch" href="/assets/js/249.892a2dbc.js"><link rel="prefetch" href="/assets/js/25.1d124715.js"><link rel="prefetch" href="/assets/js/250.aad533d9.js"><link rel="prefetch" href="/assets/js/251.a2771382.js"><link rel="prefetch" href="/assets/js/252.8436945c.js"><link rel="prefetch" href="/assets/js/253.c53e2276.js"><link rel="prefetch" href="/assets/js/254.3cd50fa4.js"><link rel="prefetch" href="/assets/js/255.89b21b5b.js"><link rel="prefetch" href="/assets/js/256.00dcf18a.js"><link rel="prefetch" href="/assets/js/257.e2cfec93.js"><link rel="prefetch" href="/assets/js/258.040929da.js"><link rel="prefetch" href="/assets/js/259.32dfb101.js"><link rel="prefetch" href="/assets/js/26.c0ce2bb7.js"><link rel="prefetch" href="/assets/js/260.725503c6.js"><link rel="prefetch" href="/assets/js/261.7aa1c42d.js"><link rel="prefetch" href="/assets/js/262.ec494c03.js"><link rel="prefetch" href="/assets/js/263.16e9e497.js"><link rel="prefetch" href="/assets/js/264.d091ec5e.js"><link rel="prefetch" href="/assets/js/265.6f3b9cc2.js"><link rel="prefetch" href="/assets/js/266.8f7bec21.js"><link rel="prefetch" href="/assets/js/267.d397e513.js"><link rel="prefetch" href="/assets/js/268.88e6891e.js"><link rel="prefetch" href="/assets/js/269.5d219245.js"><link rel="prefetch" href="/assets/js/27.57f723f3.js"><link rel="prefetch" href="/assets/js/270.202eb578.js"><link rel="prefetch" href="/assets/js/271.3804f1d6.js"><link rel="prefetch" href="/assets/js/272.430471d1.js"><link rel="prefetch" href="/assets/js/273.272f52c9.js"><link rel="prefetch" href="/assets/js/28.93baeea2.js"><link rel="prefetch" href="/assets/js/29.1e86f5a3.js"><link rel="prefetch" href="/assets/js/3.38d85a61.js"><link rel="prefetch" href="/assets/js/30.0f95edd9.js"><link rel="prefetch" href="/assets/js/31.458a7ead.js"><link rel="prefetch" href="/assets/js/32.01cdeebf.js"><link rel="prefetch" href="/assets/js/33.9b894e7f.js"><link rel="prefetch" href="/assets/js/34.7ed46783.js"><link rel="prefetch" href="/assets/js/35.285844e8.js"><link rel="prefetch" href="/assets/js/36.4eb71755.js"><link rel="prefetch" href="/assets/js/37.16c48fd4.js"><link rel="prefetch" href="/assets/js/38.301d39e9.js"><link rel="prefetch" href="/assets/js/39.8ce22e0e.js"><link rel="prefetch" href="/assets/js/4.688aea8c.js"><link rel="prefetch" href="/assets/js/40.5a056de1.js"><link rel="prefetch" href="/assets/js/41.c674e325.js"><link rel="prefetch" href="/assets/js/42.46fde3b4.js"><link rel="prefetch" href="/assets/js/43.cc4e5210.js"><link rel="prefetch" href="/assets/js/44.54d928ec.js"><link rel="prefetch" href="/assets/js/45.92743e71.js"><link rel="prefetch" href="/assets/js/46.43ad4289.js"><link rel="prefetch" href="/assets/js/47.5b2f60c8.js"><link rel="prefetch" href="/assets/js/48.34a3ab32.js"><link rel="prefetch" href="/assets/js/49.bce27dd7.js"><link rel="prefetch" href="/assets/js/5.eb1d7ab1.js"><link rel="prefetch" href="/assets/js/50.193165d2.js"><link rel="prefetch" href="/assets/js/51.4c8f12ef.js"><link rel="prefetch" href="/assets/js/52.17e63835.js"><link rel="prefetch" href="/assets/js/54.6c431aae.js"><link rel="prefetch" href="/assets/js/55.6d63d4b9.js"><link rel="prefetch" href="/assets/js/56.481b4863.js"><link rel="prefetch" href="/assets/js/57.5ddbe9d4.js"><link rel="prefetch" href="/assets/js/58.eb7efd6b.js"><link rel="prefetch" href="/assets/js/59.c9422f8f.js"><link rel="prefetch" href="/assets/js/6.c7f5de3f.js"><link rel="prefetch" href="/assets/js/60.a57071b2.js"><link rel="prefetch" href="/assets/js/61.eeb8df92.js"><link rel="prefetch" href="/assets/js/62.4f961589.js"><link rel="prefetch" href="/assets/js/63.9324d29b.js"><link rel="prefetch" href="/assets/js/64.0e96e0b7.js"><link rel="prefetch" href="/assets/js/65.c625ba07.js"><link rel="prefetch" href="/assets/js/66.81a0d188.js"><link rel="prefetch" href="/assets/js/67.59266e8f.js"><link rel="prefetch" href="/assets/js/68.620845a0.js"><link rel="prefetch" href="/assets/js/69.24e17ed6.js"><link rel="prefetch" href="/assets/js/7.0bd1884d.js"><link rel="prefetch" href="/assets/js/70.d6ff538a.js"><link rel="prefetch" href="/assets/js/71.b2bc1945.js"><link rel="prefetch" href="/assets/js/72.c7710130.js"><link rel="prefetch" href="/assets/js/73.a8a98690.js"><link rel="prefetch" href="/assets/js/74.c8e46658.js"><link rel="prefetch" href="/assets/js/75.b04c5dd9.js"><link rel="prefetch" href="/assets/js/76.a749ca2d.js"><link rel="prefetch" href="/assets/js/77.5a5c864a.js"><link rel="prefetch" href="/assets/js/78.401fdbc7.js"><link rel="prefetch" href="/assets/js/79.08c6e2f5.js"><link rel="prefetch" href="/assets/js/8.3215b8dd.js"><link rel="prefetch" href="/assets/js/80.fdb08510.js"><link rel="prefetch" href="/assets/js/81.c1a87b81.js"><link rel="prefetch" href="/assets/js/82.ae249bda.js"><link rel="prefetch" href="/assets/js/83.81506a58.js"><link rel="prefetch" href="/assets/js/84.225aa4ac.js"><link rel="prefetch" href="/assets/js/85.b73f05b3.js"><link rel="prefetch" href="/assets/js/86.cdce3f1d.js"><link rel="prefetch" href="/assets/js/87.8d4f08ef.js"><link rel="prefetch" href="/assets/js/88.97732d20.js"><link rel="prefetch" href="/assets/js/89.0de017dd.js"><link rel="prefetch" href="/assets/js/9.077a14e4.js"><link rel="prefetch" href="/assets/js/90.9be4bb74.js"><link rel="prefetch" href="/assets/js/91.7db76f84.js"><link rel="prefetch" href="/assets/js/92.c5d72706.js"><link rel="prefetch" href="/assets/js/93.c4e3e8fb.js"><link rel="prefetch" href="/assets/js/94.7b816108.js"><link rel="prefetch" href="/assets/js/95.186dfca2.js"><link rel="prefetch" href="/assets/js/96.5e2e007f.js"><link rel="prefetch" href="/assets/js/97.b7559ed3.js"><link rel="prefetch" href="/assets/js/98.f1ed85ab.js"><link rel="prefetch" href="/assets/js/99.94147714.js">
    <link rel="stylesheet" href="/assets/css/0.styles.74fd5345.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/hadoop.jpeg" alt="Hadoop中文网" class="logo"> <span class="site-name can-hide">Hadoop中文网</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/docs/releases/download.html" class="nav-link">下载安装</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">参考文档</a></div><div class="nav-item"><a href="/docs/awesome/" class="nav-link">资源教程</a></div><div class="nav-item"><a href="/docs/releases/latestnews.html" class="nav-link">最新消息</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/docs/hadoop-project-dist/hadoop-common/Tracing.html" class="nav-link">English</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/docs/releases/download.html" class="nav-link">下载安装</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">参考文档</a></div><div class="nav-item"><a href="/docs/awesome/" class="nav-link">资源教程</a></div><div class="nav-item"><a href="/docs/releases/latestnews.html" class="nav-link">最新消息</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/docs/hadoop-project-dist/hadoop-common/Tracing.html" class="nav-link">English</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>General</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Common</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/hadoop-project-dist/hadoop-common/CLIMiniCluster.html" class="sidebar-link">CLI Mini Cluster</a></li><li><a href="/docs/hadoop-project-dist/hadoop-common/NativeLibraries.html" class="sidebar-link">Native Libraries</a></li><li><a href="/docs/hadoop-project-dist/hadoop-common/Superusers.html" class="sidebar-link">Proxy User</a></li><li><a href="/docs/hadoop-project-dist/hadoop-common/RackAwareness.html" class="sidebar-link">Rack Awareness</a></li><li><a href="/docs/hadoop-project-dist/hadoop-common/SecureMode.html" class="sidebar-link">Secure Mode</a></li><li><a href="/docs/hadoop-project-dist/hadoop-common/ServiceLevelAuth.html" class="sidebar-link">Service Level Authorization</a></li><li><a href="/docs/hadoop-project-dist/hadoop-common/HttpAuthentication.html" class="sidebar-link">HTTP Authentication</a></li><li><a href="/docs/hadoop-project-dist/hadoop-common/CredentialProviderAPI.html" class="sidebar-link">Credential Provider API</a></li><li><a href="/docs/hadoop-kms/" class="sidebar-link">Hadoop KMS</a></li><li><a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html" class="active sidebar-link">Tracing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html#dapper-like-tracing-in-hadoop" class="sidebar-link">Dapper-like Tracing in Hadoop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html#htrace" class="sidebar-link">HTrace</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html#spanreceivers" class="sidebar-link">SpanReceivers</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html#dynamic-update-of-tracing-configuration" class="sidebar-link">Dynamic update of tracing configuration</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html#starting-tracing-spans-by-htrace-api" class="sidebar-link">Starting tracing spans by HTrace API</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html#sample-code-for-tracing-by-htrace-api" class="sidebar-link">Sample code for tracing by HTrace API</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html#starting-tracing-spans-by-filesystem-shell" class="sidebar-link">Starting tracing spans by FileSystem Shell</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-common/Tracing.html#starting-tracing-spans-by-configuration-for-hdfs-client" class="sidebar-link">Starting tracing spans by configuration for HDFS client</a></li></ul></li></ul></li><li><a href="/docs/hadoop-project-dist/hadoop-common/UnixShellGuide.html" class="sidebar-link">Unix Shell Guide</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HDFS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MapReduce</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MapReduce REST APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>YARN</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>YARN REST APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>YARN Service</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Submarine</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hadoop Compatible File Systems</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Auth</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reference</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>配置</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="enabling-dapper-like-tracing-in-hadoop"><a href="#enabling-dapper-like-tracing-in-hadoop" aria-hidden="true" class="header-anchor">#</a> Enabling Dapper-like Tracing in Hadoop</h1> <h2 id="dapper-like-tracing-in-hadoop"><a href="#dapper-like-tracing-in-hadoop" aria-hidden="true" class="header-anchor">#</a> Dapper-like Tracing in Hadoop</h2> <h3 id="htrace"><a href="#htrace" aria-hidden="true" class="header-anchor">#</a> HTrace</h3> <p><a href="https://issues.apache.org/jira/browse/HDFS-5274" target="_blank" rel="noopener noreferrer">HDFS-5274<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> added support for tracing requests through HDFS, using the open source tracing library, <a href="http://htrace.incubator.apache.org/" target="_blank" rel="noopener noreferrer">Apache HTrace<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Setting up tracing is quite simple, however it requires some very minor changes to your client code.</p> <h3 id="spanreceivers"><a href="#spanreceivers" aria-hidden="true" class="header-anchor">#</a> SpanReceivers</h3> <p>The tracing system works by collecting information in structs called ‘Spans’. It is up to you to choose how you want to receive this information by using implementation of <a href="http://htrace.incubator.apache.org/developer_guide.html#SpanReceivers" target="_blank" rel="noopener noreferrer">SpanReceiver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> interface bundled with HTrace or implementing it by yourself.</p> <p><a href="http://htrace.incubator.apache.org/" target="_blank" rel="noopener noreferrer">HTrace<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provides options such as</p> <ul><li>FlumeSpanReceiver</li> <li>HBaseSpanReceiver</li> <li>HTracedRESTReceiver</li> <li>ZipkinSpanReceiver</li></ul> <p>See core-default.xml for a description of HTrace configuration keys. In some cases, you will also need to add the jar containing the SpanReceiver that you are using to the classpath of Hadoop on each node. (In the example above, LocalFileSpanReceiver is included in the htrace-core4 jar which is bundled with Hadoop.)</p> <pre><code>    $ cp htrace-htraced/target/htrace-htraced-4.1.0-incubating.jar $HADOOP_HOME/share/hadoop/common/lib/
</code></pre> <h3 id="dynamic-update-of-tracing-configuration"><a href="#dynamic-update-of-tracing-configuration" aria-hidden="true" class="header-anchor">#</a> Dynamic update of tracing configuration</h3> <p>You can use hadoop trace command to see and update the tracing configuration of each servers. You must specify IPC server address of namenode or datanode by -host option. You need to run the command against all servers if you want to update the configuration of all servers.</p> <p>hadoop trace -list shows list of loaded span receivers associated with the id.</p> <pre><code>  $ hadoop trace -list -host 192.168.56.2:9000
  ID  CLASS
  1   org.apache.htrace.core.LocalFileSpanReceiver

  $ hadoop trace -list -host 192.168.56.2:9867
  ID  CLASS
  1   org.apache.htrace.core.LocalFileSpanReceiver
</code></pre> <p>hadoop trace -remove removes span receiver from server. -remove options takes id of span receiver as argument.</p> <pre><code>  $ hadoop trace -remove 1 -host 192.168.56.2:9000
  Removed trace span receiver 1
</code></pre> <p>hadoop trace -add adds span receiver to server. You need to specify the class name of span receiver as argument of -class option. You can specify the configuration associated with span receiver by -Ckey=value options.</p> <pre><code>  $ hadoop trace -add -class org.apache.htrace.core.LocalFileSpanReceiver -Chadoop.htrace.local.file.span.receiver.path=/tmp/htrace.out -host 192.168.56.2:9000
  Added trace span receiver 2 with configuration hadoop.htrace.local.file.span.receiver.path = /tmp/htrace.out

  $ hadoop trace -list -host 192.168.56.2:9000
  ID  CLASS
  2   org.apache.htrace.core.LocalFileSpanReceiver
</code></pre> <p>If the cluster is Kerberized, the service principal name must be specified using -principal option. For example, to show list of span receivers of a namenode:</p> <pre><code>$ hadoop trace -list -host NN1:8020 -principal namenode/NN1@EXAMPLE.COM
</code></pre> <p>Or, for a datanode:</p> <pre><code>$ hadoop trace -list -host DN2:9867 -principal datanode/DN1@EXAMPLE.COM
</code></pre> <h3 id="starting-tracing-spans-by-htrace-api"><a href="#starting-tracing-spans-by-htrace-api" aria-hidden="true" class="header-anchor">#</a> Starting tracing spans by HTrace API</h3> <p>In order to trace, you will need to wrap the traced logic with tracing span as shown below. When there is running tracing spans, the tracing information is propagated to servers along with RPC requests.</p> <pre><code>    import org.apache.hadoop.hdfs.HdfsConfiguration;
    import org.apache.htrace.core.Tracer;
    import org.apache.htrace.core.TraceScope;

    ...


    ...

        TraceScope ts = tracer.newScope(&quot;Gets&quot;);
        try {
          ... // traced logic
        } finally {
          ts.close();
        }
</code></pre> <h3 id="sample-code-for-tracing-by-htrace-api"><a href="#sample-code-for-tracing-by-htrace-api" aria-hidden="true" class="header-anchor">#</a> Sample code for tracing by HTrace API</h3> <p>The TracingFsShell.java shown below is the wrapper of FsShell which start tracing span before invoking HDFS shell command.</p> <pre><code>    import org.apache.hadoop.fs.FileSystem;
    import org.apache.hadoop.fs.Path;
    import org.apache.hadoop.conf.Configuration;
    import org.apache.hadoop.conf.Configured;
    import org.apache.hadoop.tracing.TraceUtils;
    import org.apache.hadoop.util.Tool;
    import org.apache.hadoop.util.ToolRunner;
    import org.apache.htrace.core.Tracer;
    import org.apache.htrace.core.TraceScope;
    
    public class Sample extends Configured implements Tool {
      @Override
      public int run(String argv[]) throws Exception {
        FileSystem fs = FileSystem.get(getConf());
        Tracer tracer = new Tracer.Builder(&quot;Sample&quot;).
            conf(TraceUtils.wrapHadoopConf(&quot;sample.htrace.&quot;, getConf())).
            build();
        int res = 0;
        try (TraceScope scope = tracer.newScope(&quot;sample&quot;)) {
          Thread.sleep(1000);
          fs.listStatus(new Path(&quot;/&quot;));
        }
        tracer.close();
        return res;
      }
      
      public static void main(String argv[]) throws Exception {
        ToolRunner.run(new Sample(), argv);
      }
    }
</code></pre> <p>You can compile and execute this code as shown below.</p> <pre><code>$ javac -cp `hadoop classpath` Sample.java
$ java -cp .:`hadoop classpath` Sample \
    -Dsample.htrace.span.receiver.classes=LocalFileSpanReceiver \
    -Dsample.htrace.sampler.classes=AlwaysSampler
</code></pre> <h3 id="starting-tracing-spans-by-filesystem-shell"><a href="#starting-tracing-spans-by-filesystem-shell" aria-hidden="true" class="header-anchor">#</a> Starting tracing spans by FileSystem Shell</h3> <p>The FileSystem Shell can enable tracing by configuration properties.</p> <p>Configure the span receivers and samplers in core-site.xml or command line by properties fs.client.htrace.sampler.classes and fs.client.htrace.spanreceiver.classes.</p> <pre><code>$ hdfs dfs -Dfs.shell.htrace.span.receiver.classes=LocalFileSpanReceiver \
           -Dfs.shell.htrace.sampler.classes=AlwaysSampler \
           -ls /
</code></pre> <h3 id="starting-tracing-spans-by-configuration-for-hdfs-client"><a href="#starting-tracing-spans-by-configuration-for-hdfs-client" aria-hidden="true" class="header-anchor">#</a> Starting tracing spans by configuration for HDFS client</h3> <p>The DFSClient can enable tracing internally. This allows you to use HTrace with your client without modifying the client source code.</p> <p>Configure the span receivers and samplers in hdfs-site.xml by properties fs.client.htrace.sampler.classes and fs.client.htrace.spanreceiver.classes. The value of fs.client.htrace.sampler.classes can be NeverSampler, AlwaysSampler or ProbabilitySampler.</p> <ul><li><p>NeverSampler: HTrace is OFF for all requests to namenodes and datanodes;</p></li> <li><p>AlwaysSampler: HTrace is ON for all requests to namenodes and datanodes;</p></li> <li><p>ProbabilitySampler: HTrace is ON for some percentage% of requests to namenodes and datanodes</p> <pre><code>  &lt;property&gt;
    &lt;name&gt;hadoop.htrace.span.receiver.classes&lt;/name&gt;
    &lt;value&gt;LocalFileSpanReceiver&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;fs.client.htrace.sampler.classes&lt;/name&gt;
    &lt;value&gt;ProbabilitySampler&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;fs.client.htrace.sampler.fraction&lt;/name&gt;
    &lt;value&gt;0.01&lt;/value&gt;
  &lt;/property&gt;
</code></pre></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">2019/11/1 下午5:21:59</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/hadoop-kms/" class="prev">Hadoop KMS</a></span> <span class="next"><a href="/docs/hadoop-project-dist/hadoop-common/UnixShellGuide.html">Unix Shell Guide</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7e1369fc.js" defer></script><script src="/assets/js/2.8cd1edd2.js" defer></script><script src="/assets/js/53.0b9d0754.js" defer></script>
  </body>
</html>
