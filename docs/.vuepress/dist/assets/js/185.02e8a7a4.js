(window.webpackJsonp=window.webpackJsonp||[]).push([[185],{385:function(e,t,a){"use strict";a.r(t);var o=a(0),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"hadoop-setting-up-a-single-node-cluster"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-setting-up-a-single-node-cluster"}},[e._v("#")]),e._v(" Hadoop: Setting up a Single Node Cluster.")]),e._v(" "),a("h2",{attrs:{id:"purpose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#purpose"}},[e._v("#")]),e._v(" Purpose")]),e._v(" "),a("p",[e._v("This document describes how to set up and configure a single-node Hadoop installation so that you can quickly perform simple operations using Hadoop MapReduce and the Hadoop Distributed File System (HDFS).")]),e._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),a("h3",{attrs:{id:"supported-platforms"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#supported-platforms"}},[e._v("#")]),e._v(" Supported Platforms")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("GNU/Linux is supported as a development and production platform. Hadoop has been demonstrated on GNU/Linux clusters with 2000 nodes.")])]),e._v(" "),a("li",[a("p",[e._v("Windows is also a supported platform but the followings steps are for Linux only. To set up Hadoop on Windows, see "),a("a",{attrs:{href:"http://wiki.apache.org/hadoop/Hadoop2OnWindows",target:"_blank",rel:"noopener noreferrer"}},[e._v("wiki page"),a("OutboundLink")],1),e._v(".")])])]),e._v(" "),a("h3",{attrs:{id:"required-software"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#required-software"}},[e._v("#")]),e._v(" Required Software")]),e._v(" "),a("p",[e._v("Required software for Linux include:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Java™ must be installed. Recommended Java versions are described at "),a("a",{attrs:{href:"http://wiki.apache.org/hadoop/HadoopJavaVersions",target:"_blank",rel:"noopener noreferrer"}},[e._v("HadoopJavaVersions"),a("OutboundLink")],1),e._v(".")])]),e._v(" "),a("li",[a("p",[e._v("ssh must be installed and sshd must be running to use the Hadoop scripts that manage remote Hadoop daemons if the optional start and stop scripts are to be used. Additionally, it is recommmended that pdsh also be installed for better ssh resource management.")])])]),e._v(" "),a("h3",{attrs:{id:"installing-software"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing-software"}},[e._v("#")]),e._v(" Installing Software")]),e._v(" "),a("p",[e._v("If your cluster doesn’t have the requisite software you will need to install it.")]),e._v(" "),a("p",[e._v("For example on Ubuntu Linux:")]),e._v(" "),a("pre",[a("code",[e._v("  $ sudo apt-get install ssh\n  $ sudo apt-get install pdsh\n")])]),e._v(" "),a("h2",{attrs:{id:"download"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#download"}},[e._v("#")]),e._v(" Download")]),e._v(" "),a("p",[e._v("To get a Hadoop distribution, download a recent stable release from one of the "),a("a",{attrs:{href:"http://www.apache.org/dyn/closer.cgi/hadoop/common/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Download Mirrors"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"prepare-to-start-the-hadoop-cluster"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prepare-to-start-the-hadoop-cluster"}},[e._v("#")]),e._v(" Prepare to Start the Hadoop Cluster")]),e._v(" "),a("p",[e._v("Unpack the downloaded Hadoop distribution. In the distribution, edit the file etc/hadoop/hadoop-env.sh to define some parameters as follows:")]),e._v(" "),a("pre",[a("code",[e._v("  # set to the root of your Java installation\n  export JAVA_HOME=/usr/java/latest\n")])]),e._v(" "),a("p",[e._v("Try the following command:")]),e._v(" "),a("pre",[a("code",[e._v("  $ bin/hadoop\n")])]),e._v(" "),a("p",[e._v("This will display the usage documentation for the hadoop script.")]),e._v(" "),a("p",[e._v("Now you are ready to start your Hadoop cluster in one of the three supported modes:")]),e._v(" "),a("ul",[a("li",[e._v("Local (Standalone) Mode")]),e._v(" "),a("li",[e._v("Pseudo-Distributed Mode")]),e._v(" "),a("li",[e._v("Fully-Distributed Mode")])]),e._v(" "),a("h2",{attrs:{id:"standalone-operation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#standalone-operation"}},[e._v("#")]),e._v(" Standalone Operation")]),e._v(" "),a("p",[e._v("By default, Hadoop is configured to run in a non-distributed mode, as a single Java process. This is useful for debugging.")]),e._v(" "),a("p",[e._v("The following example copies the unpacked conf directory to use as input and then finds and displays every match of the given regular expression. Output is written to the given output directory.")]),e._v(" "),a("pre",[a("code",[e._v("  $ mkdir input\n  $ cp etc/hadoop/*.xml input\n  $ bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.1.jar grep input output 'dfs[a-z.]+'\n  $ cat output/*\n")])]),e._v(" "),a("h2",{attrs:{id:"pseudo-distributed-operation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pseudo-distributed-operation"}},[e._v("#")]),e._v(" Pseudo-Distributed Operation")]),e._v(" "),a("p",[e._v("Hadoop can also be run on a single-node in a pseudo-distributed mode where each Hadoop daemon runs in a separate Java process.")]),e._v(" "),a("h3",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),a("p",[e._v("Use the following:")]),e._v(" "),a("p",[e._v("etc/hadoop/core-site.xml:")]),e._v(" "),a("pre",[a("code",[e._v("<configuration>\n    <property>\n        <name>fs.defaultFS</name>\n        <value>hdfs://localhost:9000</value>\n    </property>\n</configuration>\n")])]),e._v(" "),a("p",[e._v("etc/hadoop/hdfs-site.xml:")]),e._v(" "),a("pre",[a("code",[e._v("<configuration>\n    <property>\n        <name>dfs.replication</name>\n        <value>1</value>\n    </property>\n</configuration>\n")])]),e._v(" "),a("h3",{attrs:{id:"setup-passphraseless-ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup-passphraseless-ssh"}},[e._v("#")]),e._v(" Setup passphraseless ssh")]),e._v(" "),a("p",[e._v("Now check that you can ssh to the localhost without a passphrase:")]),e._v(" "),a("pre",[a("code",[e._v("  $ ssh localhost\n")])]),e._v(" "),a("p",[e._v("If you cannot ssh to localhost without a passphrase, execute the following commands:")]),e._v(" "),a("pre",[a("code",[e._v("  $ ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa\n  $ cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\n  $ chmod 0600 ~/.ssh/authorized_keys\n")])]),e._v(" "),a("h3",{attrs:{id:"execution"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#execution"}},[e._v("#")]),e._v(" Execution")]),e._v(" "),a("p",[e._v("The following instructions are to run a MapReduce job locally. If you want to execute a job on YARN, see YARN on Single Node.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Format the filesystem:")]),e._v(" "),a("pre",[a("code",[e._v(" $ bin/hdfs namenode -format\n")])])]),e._v(" "),a("li",[a("p",[e._v("Start NameNode daemon and DataNode daemon:")]),e._v(" "),a("pre",[a("code",[e._v(" $ sbin/start-dfs.sh\n")])])])]),e._v(" "),a("p",[e._v("The hadoop daemon log output is written to the $HADOOP_LOG_DIR directory (defaults to $HADOOP_HOME/logs).")]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("Browse the web interface for the NameNode; by default it is available at:")])]),e._v(" "),a("pre",[a("code",[e._v("* NameNode - http://localhost:9870/\n")])]),e._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[e._v("Make the HDFS directories required to execute MapReduce jobs:")]),e._v(" "),a("pre",[a("code",[e._v(" $ bin/hdfs dfs -mkdir /user\n")])]),e._v(" "),a("p",[e._v("$ bin/hdfs dfs -mkdir /user/"),a("username")],1)]),e._v(" "),a("li",[a("p",[e._v("Copy the input files into the distributed filesystem:")]),e._v(" "),a("pre",[a("code",[e._v(" $ bin/hdfs dfs -mkdir input\n")])]),e._v(" "),a("p",[e._v("$ bin/hdfs dfs -put etc/hadoop/*.xml input")])]),e._v(" "),a("li",[a("p",[e._v("Run some of the examples provided:")]),e._v(" "),a("pre",[a("code",[e._v(" $ bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.1.jar grep input output 'dfs[a-z.]+'\n")])])]),e._v(" "),a("li",[a("p",[e._v("Examine the output files: Copy the output files from the distributed filesystem to the local filesystem and examine them:")]),e._v(" "),a("pre",[a("code",[e._v(" $ bin/hdfs dfs -get output output\n")])]),e._v(" "),a("p",[e._v("$ cat output/*")])])]),e._v(" "),a("p",[e._v("or")]),e._v(" "),a("p",[e._v("View the output files on the distributed filesystem:")]),e._v(" "),a("pre",[a("code",[e._v("      $ bin/hdfs dfs -cat output/*\n")])]),e._v(" "),a("ol",{attrs:{start:"8"}},[a("li",[a("p",[e._v("When you’re done, stop the daemons with:")]),e._v(" "),a("pre",[a("code",[e._v(" $ sbin/stop-dfs.sh\n")])])])]),e._v(" "),a("h3",{attrs:{id:"yarn-on-a-single-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yarn-on-a-single-node"}},[e._v("#")]),e._v(" YARN on a Single Node")]),e._v(" "),a("p",[e._v("You can run a MapReduce job on YARN in a pseudo-distributed mode by setting a few parameters and running ResourceManager daemon and NodeManager daemon in addition.")]),e._v(" "),a("p",[e._v("The following instructions assume that 1. ~ 4. steps of the above instructions are already executed.")]),e._v(" "),a("ol",[a("li",[e._v("Configure parameters as follows:")])]),e._v(" "),a("p",[e._v("etc/hadoop/mapred-site.xml:")]),e._v(" "),a("pre",[a("code",[e._v("    <configuration>\n    <property>\n        <name>mapreduce.framework.name</name>\n        <value>yarn</value>\n    </property>\n    <property>\n        <name>mapreduce.application.classpath</name>\n        <value>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*</value>\n    </property>\n</configuration>\n")])]),e._v(" "),a("p",[e._v("etc/hadoop/yarn-site.xml:")]),e._v(" "),a("pre",[a("code",[e._v("    <configuration>\n    <property>\n        <name>yarn.nodemanager.aux-services</name>\n        <value>mapreduce_shuffle</value>\n    </property>\n    <property>\n        <name>yarn.nodemanager.env-whitelist</name>\n        <value>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME</value>\n    </property>\n</configuration>\n")])]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[e._v("Start ResourceManager daemon and NodeManager daemon:")]),e._v(" "),a("pre",[a("code",[e._v(" $ sbin/start-yarn.sh\n")])])]),e._v(" "),a("li",[a("p",[e._v("Browse the web interface for the ResourceManager; by default it is available at:")])])]),e._v(" "),a("pre",[a("code",[e._v("* ResourceManager - http://localhost:8088/\n")])]),e._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[e._v("Run a MapReduce job.")])]),e._v(" "),a("li",[a("p",[e._v("When you’re done, stop the daemons with:")]),e._v(" "),a("pre",[a("code",[e._v(" $ sbin/stop-yarn.sh\n")])])])]),e._v(" "),a("h2",{attrs:{id:"fully-distributed-operation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fully-distributed-operation"}},[e._v("#")]),e._v(" Fully-Distributed Operation")]),e._v(" "),a("p",[e._v("For information on setting up fully-distributed, non-trivial clusters see "),a("router-link",{attrs:{to:"/en/docs/hadoop-project-dist/hadoop-common/ClusterSetup.html"}},[e._v("Cluster Setup")]),e._v(".")],1)])}),[],!1,null,null,null);t.default=s.exports}}]);